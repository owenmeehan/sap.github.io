<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RBA Exercise</title>
    <script type="text/javascript" lang="javascript" src="http://cdn.gigya.com/js/gigya.js?apikey=4_-7c3SnVVF2wkdl-kf9VQYg">        
    </script>
</head>
<body>
    <h1>RBA Exercises</h1>
    <h4>Register a user and then try to login with a wrong password 5 times</h4>
    <a href="#" onlick="gigya.accounts.showScreenSet({screenSet:'Default-RegistrationLogin', startScreen:'gigya-register-screen'})">
        Register</a>&nbsp;&nbsp;|&nbsp;&nbsp;
    <a href="#" onlick="gigya.accounts.showScreenSet({screenSet:'Default-RegistrationLogin'})">
            Login</a>&nbsp;&nbsp;|&nbsp;&nbsp;
    <span id="logout" hidden>&nbsp;&nbsp;|&nbsp;&nbsp;
    <a href="#" onclick="logout();">Logout</a></span>
    <script type="text/javascript" lang="javascript">
        function logout() {
            gigya.accounts.logout({callback:function(response) {
                if(response.errorCode==0) {
                    document.getElementById("logout").hidden=true;
                }
                else {
                    alert('Error:'+response.errorMessage);
                }        
            }});            
        }    
        
        // if there's a user logged in then shows the logout link
        gigya.accounts.getAccountInfo(
        {
                callback:function(response) {
                    if(response.errorCode == 0) {
                        document.getElementById("logout").hidden=false;
                    }
        }});

        // traps the login event to show the logout link
        gigya.socialize.addEventHandlers({
            onLogin: function() {
                document.getElementById("logout").hidden=false;
            }
        });
    </script>
</body>
</html>
